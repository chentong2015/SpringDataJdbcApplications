CREATE TABLE ${table-domain}RESOURCE_LOCK
(
    ID                 NUMBER(19) GENERATED AS IDENTITY,
    LOCK_KEY           VARCHAR2(64) NOT NULL,
    LAST_MODIFIED_DATE TIMESTAMP(0) DEFAULT to_timestamp('3000-01-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS'),
    STATUS             VARCHAR2(64) NOT NULL,
    TENANT_ID          VARCHAR2(64) NOT NULL
) TABLESPACE ${ts-data};

ALTER TABLE ${table-domain}RESOURCE_LOCK
ADD CONSTRAINT ${domain}RESOURCE_LOCK_ID_PK PRIMARY KEY (ID) USING INDEX
TABLESPACE ${ts-index};

CREATE UNIQUE INDEX ${domain}RESOURCE_LOCK_KEY_UX
ON ${table-domain}RESOURCE_LOCK (LOCK_KEY, TENANT_ID) TABLESPACE ${ts-index};


CREATE TABLE ${table-domain}FILE_INFO
(
    ID                    NUMBER(10, 0) GENERATED AS IDENTITY,
    TYPE                  VARCHAR2(64)  NOT NULL,
    REFERENCE             VARCHAR2(256) NOT NULL,
    ORIGINAL_NAME         VARCHAR2(256 CHAR) DEFAULT NULL,
    CONTENT               BLOB,
    FILE_LENGTH           NUMBER(19)    NOT NULL,
    SUM_MD5               VARCHAR2(32)       DEFAULT NULL,
    SUM_SHA256            VARCHAR2(64)       DEFAULT NULL,
    COMPRESSED            CHAR(1)            DEFAULT 'N',
    LINKED_ENTITY_COUNTER INT                DEFAULT 0,
    SHARED                CHAR(1)            DEFAULT 'N'
) TABLESPACE ${ts-data};

ALTER TABLE ${table-domain}FILE_INFO
ADD CONSTRAINT ${domain}FILE_INFO_ID_PK PRIMARY KEY (ID) USING INDEX
TABLESPACE ${ts-index};
